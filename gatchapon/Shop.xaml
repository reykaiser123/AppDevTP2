<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="gatchapon.Shop"
             Title="Shop"
             BackgroundColor="#ADC179"
             Shell.NavBarIsVisible="False"
             Shell.TabBarIsVisible="False">
    <!-- 1. HIDE SYSTEM BARS -->

    <Grid RowDefinitions="Auto, *">

        <!-- 2. CUSTOM HEADER (Replaces TitleView) -->
        <Grid Grid.Row="0" 
              BackgroundColor="#ADC179"
              HeightRequest="60"
              Padding="15,0">

            <!-- Back Button -->
            <ImageButton Source="back_icon.png"
                         HeightRequest="30"
                         WidthRequest="30"
                         HorizontalOptions="Start"
                         VerticalOptions="Center"
                         BackgroundColor="Transparent"
                         Clicked="OnBackClicked"/>

            <!-- SHOP Title -->
            <Label Text="SHOP" 
                   TextColor="White" 
                   FontSize="22" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center" 
                   VerticalOptions="Center"
                   Margin="-50,0,0,0"/>

            <!-- Gold Pill (Right Side) -->
            <Border BackgroundColor="#6C584D" 
                    StrokeShape="RoundRectangle 15" 
                    HeightRequest="30"
                    StrokeThickness="0"
                    Padding="12,0"
                    HorizontalOptions="End"
                    VerticalOptions="Center">

                <HorizontalStackLayout Spacing="5" VerticalOptions="Center">
                    <Image Source="goldcoin_icon.png" 
                           Aspect="AspectFit"
                           HeightRequest="18" 
                           WidthRequest="18" 
                           VerticalOptions="Center"/>

                    <Label x:Name="GoldLabel" 
                           Text="0" 
                           TextColor="White" 
                           FontSize="14" 
                           FontAttributes="Bold"
                           VerticalOptions="Center" />
                </HorizontalStackLayout>
            </Border>
        </Grid>

        <!-- 3. MAIN CONTENT -->
        <ScrollView Grid.Row="1" 
                    Padding="10" 
                    VerticalOptions="Fill">

            <FlexLayout Wrap="Wrap" 
                        JustifyContent="SpaceEvenly" 
                        Direction="Row"
                        Padding="0,10,0,50">

                <!-- CARD 1: Stream Gear Crate -->
                <Border BackgroundColor="#F2EED5" StrokeShape="RoundRectangle 15" WidthRequest="155" HeightRequest="220" StrokeThickness="0" Margin="0,0,0,15">
                    <Grid RowDefinitions="*, Auto, Auto" Padding="10">
                        <Border Grid.Row="0" Stroke="#A335EE" StrokeThickness="3" StrokeShape="RoundRectangle 12" BackgroundColor="Black" Padding="5" HeightRequest="100" WidthRequest="100" HorizontalOptions="Center" VerticalOptions="Center">
                            <Image Source="epic_item_marisol.png" Aspect="AspectFill"/>
                        </Border>
                        <Label Grid.Row="1" Text="Stream Gear Crate" FontSize="15" TextColor="#5A4D41" FontAttributes="Bold" HorizontalTextAlignment="Center" VerticalTextAlignment="Center" Margin="0,5,0,5"/>
                        <HorizontalStackLayout Grid.Row="2" Spacing="4" HorizontalOptions="Center" Margin="0,0,0,5">
                            <Image Source="goldcoin_icon.png" HeightRequest="14" WidthRequest="14" VerticalOptions="Center"/>
                            <Label Text="1000" FontSize="13" TextColor="#5A4D41" FontAttributes="Bold" VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </Grid>
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnBuyCrateClicked"/>
                    </Border.GestureRecognizers>
                </Border>

                <!-- CARD 2: Sky-High Scarf -->
                <Border BackgroundColor="#F2EED5" StrokeShape="RoundRectangle 15" WidthRequest="155" HeightRequest="220" StrokeThickness="0" Margin="0,0,0,15">
                    <Grid RowDefinitions="*, Auto, Auto" Padding="10">
                        <Border Grid.Row="0" Stroke="#A335EE" StrokeThickness="3" StrokeShape="RoundRectangle 12" BackgroundColor="Black" Padding="5" HeightRequest="100" WidthRequest="100" HorizontalOptions="Center" VerticalOptions="Center">
                            <Image Source="epic_item_roberto.png" Aspect="AspectFill"/>
                        </Border>
                        <Label Grid.Row="1" Text="Sky-High Scarf" FontSize="15" TextColor="#5A4D41" FontAttributes="Bold" HorizontalTextAlignment="Center" VerticalTextAlignment="Center" Margin="0,5,0,5"/>
                        <HorizontalStackLayout Grid.Row="2" Spacing="4" HorizontalOptions="Center" Margin="0,0,0,5">
                            <Image Source="goldcoin_icon.png" HeightRequest="14" WidthRequest="14" VerticalOptions="Center"/>
                            <Label Text="300" FontSize="13" TextColor="#5A4D41" FontAttributes="Bold" VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </Grid>
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnBuyScarfClicked"/>
                    </Border.GestureRecognizers>
                </Border>

                <!-- CARD 3: Woven Cloud Tapestry -->
                <Border BackgroundColor="#F2EED5" StrokeShape="RoundRectangle 15" WidthRequest="155" HeightRequest="220" StrokeThickness="0" Margin="0,0,0,15">
                    <Grid RowDefinitions="*, Auto, Auto" Padding="10">
                        <Border Grid.Row="0" Stroke="#FFD700" StrokeThickness="3" StrokeShape="RoundRectangle 12" BackgroundColor="Black" Padding="5" HeightRequest="100" WidthRequest="100" HorizontalOptions="Center" VerticalOptions="Center">
                            <Image Source="legendary_item.png" Aspect="AspectFill"/>
                        </Border>
                        <Label Grid.Row="1" Text="Woven Cloud Tapestry" FontSize="15" TextColor="#5A4D41" FontAttributes="Bold" HorizontalTextAlignment="Center" VerticalTextAlignment="Center" Margin="0,5,0,5"/>
                        <HorizontalStackLayout Grid.Row="2" Spacing="4" HorizontalOptions="Center" Margin="0,0,0,5">
                            <Image Source="goldcoin_icon.png" HeightRequest="14" WidthRequest="14" VerticalOptions="Center"/>
                            <Label Text="2000" FontSize="13" TextColor="#5A4D41" FontAttributes="Bold" VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </Grid>
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnBuyTapestryClicked"/>
                    </Border.GestureRecognizers>
                </Border>

            </FlexLayout>
        </ScrollView>
    </Grid>
</ContentPage>